var M=(e,o,a)=>new Promise((l,t)=>{var d=i=>{try{s(a.next(i))}catch(u){t(u)}},h=i=>{try{s(a.throw(i))}catch(u){t(u)}},s=i=>i.done?l(i.value):Promise.resolve(i.value).then(d,h);s((a=a.apply(e,o)).next())});import{P as E,W as j,_ as D}from"./index-V9V-ISoV.js";const Z=e=>E.request("post","/hand/add",{data:e}),$=e=>E.request("get","/hand/list",{data:e}),ee=e=>E.request("post","/hand/delete",{data:e}),te=e=>E.request("post","/hand/update",{data:e}),H=e=>E.request("post","/upload",{data:e},{headers:{"Content-Type":"multipart/form-data"}});function oe(e){if(!navigator.clipboard){W(e);return}navigator.clipboard.writeText(e).then(function(){ElementPlus.ElMessage.success("复制成功！")},function(){ElementPlus.ElMessage.error("复制失败，请手动复制！")})}function W(e){var o=document.createElement("textarea");o.value=e,o.style.top="0",o.style.left="0",o.style.position="fixed",document.body.appendChild(o),o.focus(),o.select();try{var a=document.execCommand("copy");a&&ElementPlus.ElMessage.success("复制成功！")}catch(l){ElementPlus.ElMessage.error("复制失败，请手动复制！")}document.body.removeChild(o)}const G="data:image/png;base64,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";function F(){function e(a,l){return M(this,null,function*(){const t=document.createElement("canvas"),d=50,h=-20*Math.PI/180,s=a.width,i=a.height,u=(l==null?void 0:l.width)||0,A=(l==null?void 0:l.height)||0;t.width=Math.max(s,u)+2*d,t.height=Math.max(s,u)+3*d;const c=t.getContext("2d");c.fillStyle="red",c.fillRect(0,0,t.width,t.height);const g=(t.width-s)/2,v=l?d+50:d;if(c.drawImage(a,g,v,s,i),c.save(),l){const C=(t.width-u)/2,n=d;c.translate(C+u/2,n+A/2),c.rotate(h),c.drawImage(l,-u/2,-A/2,u,A),c.restore()}const B=yield U(G);return R(B,{ctx:c,canvasWidth:t.width,canvasHeight:t.height}),new Promise(C=>{t.toBlob(n=>{const r=new File([n],"merged-image.png",{type:"image/png",lastModified:Date.now()});t.remove(),C({raw:r,url:URL.createObjectURL(n)})})})})}function o(a){const l=new FileReader;return new Promise(t=>{l.onload=d=>M(this,null,function*(){const h=yield U(d.target.result);t(h)}),l.readAsDataURL(a)})}return{combineImages:e,getFileReader:o,ImageLoadimg:U,watermark:R}}function U(e){return new Promise(o=>{const a=new Image;a.onload=()=>{o(a)},a.src=e})}function R(e,{ctx:o,canvasWidth:a,canvasHeight:l}){const h=e.width,s=e.height,i=Math.ceil(a/(h+100)),u=Math.ceil(l/(s+100));for(let A=0;A<i;A++)for(let c=0;c<u;c++){const g=A*(h+100),v=c*(s+100);o.globalAlpha=.5,o.drawImage(e,g,v,h,s),o.globalAlpha=1}}const I={class:"uploadBox"},S={class:"el-upload-list__item-thumbnail"},X=["src"],T={key:0,class:"el-upload-list__item-status-label"},Q={class:"el-upload-list__item-actions"},K=["onClick"],z=["onClick"],O=["onClick"],J=Vue.defineComponent({__name:"index",props:Vue.mergeModels({name:{default:"1"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{getFileReader:o,combineImages:a}=F(),l="http://feima.natapp1.cc/admin/upload",t=Vue.useModel(e,"modelValue"),d=Vue.computed(()=>t.value.map(n=>n.url));Vue.ref(!1),Vue.ref("");const h=Vue.ref(0),s=Vue.ref(!1);Vue.ref(!1);const i=Vue.ref(),u=n=>{i.value.handleRemove(n)},A=n=>{h.value=n,s.value=!0},c=Vue.ref(0),g=n=>{const r=t.value[n];t.value.forEach(w=>{w.check=!1}),c.value=n,r.check=!0};function v(n,r){B()}const B=j(C,500);function C(){return M(this,null,function*(){const n=[],r=[];t.value.forEach(V=>{V.response||V.status=="success"?n.push(V):r.push(V)});const[w,p]=r;w.status="uploading",p&&(p.status="uploading");const k=yield o(w.raw),P=p?yield o(p.raw):!1,f=yield a(k,P),Y=new FormData;Y.append("file",f.raw),yield H(Y).then(V=>{f.response=V,f.status="success",n.push(f),t.value=n}).catch(V=>{f.status="fail",n.push(f),t.value=n})})}return(n,r)=>{const w=Vue.resolveComponent("Plus"),p=Vue.resolveComponent("el-icon"),k=Vue.resolveComponent("icon-picture"),P=Vue.resolveComponent("Check"),f=Vue.resolveComponent("Select"),Y=Vue.resolveComponent("zoom-in"),V=Vue.resolveComponent("Delete"),b=Vue.resolveComponent("el-upload"),L=Vue.resolveComponent("el-image-viewer"),N=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock("div",I,[Vue.createVNode(b,{ref_key:"uploadRef",ref:i,"file-list":t.value,"onUpdate:fileList":r[0]||(r[0]=m=>t.value=m),"list-type":"picture-card",width:"100px",multiple:"",name:"file",action:l,"auto-upload":!1,accept:"image/*",onChange:v},{file:Vue.withCtx(({file:m,index:x})=>[Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",{key:x},[m.status=="fail"?(Vue.openBlock(),Vue.createBlock(p,{key:0},{default:Vue.withCtx(()=>[Vue.createVNode(k)]),_:1})):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("div",S,[Vue.createElementVNode("img",{width:"100%",height:"100%",src:m.url,alt:""},null,8,X)]),m.check?(Vue.openBlock(),Vue.createElementBlock("div",T,[Vue.createVNode(p,{color:"#fff"},{default:Vue.withCtx(()=>[Vue.createVNode(P)]),_:1})])):Vue.createCommentVNode("",!0),Vue.createElementVNode("span",Q,[Vue.createElementVNode("span",{class:"el-upload-list__item-actions-preview",style:Vue.normalizeStyle({color:m.check?"var(--el-color-success)":"#fff"}),onClick:y=>g(x)},[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(f)]),_:1})],12,K),Vue.createElementVNode("span",{class:"el-upload-list__item-preview",onClick:y=>A(x)},[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(Y)]),_:1})],8,z),Vue.createElementVNode("span",{class:"el-upload-list__item-delete",onClick:y=>u(m)},[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(V)]),_:1})],8,O)])],64))])),[[N,m.status=="uploading"]])]),default:Vue.withCtx(()=>[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(w)]),_:1})]),_:1},8,["file-list"]),s.value?(Vue.openBlock(),Vue.createBlock(L,{key:0,modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=m=>s.value=m),"initial-index":h.value,"url-list":d.value,style:{"z-index":"99999999999"},"z-index:":"99999999999",teleported:!0,onClose:r[2]||(r[2]=m=>s.value=!1)},null,8,["modelValue","initial-index","url-list"])):Vue.createCommentVNode("",!0)])}}}),ne=D(J,[["__scopeId","data-v-388e88bc"]]);export{U as I,ne as R,ee as a,te as b,oe as c,Z as d,H as e,$ as h,G as s,R as w};
