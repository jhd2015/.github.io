import{a as O}from"./teachingAids-Dmr_6gUs.js";import{n as d,aN as $,aF as K,aG as w,d as B,aI as j,az as z,t as I,g as M,h as n,r as t,o as k,b as a,V as J,x as q,c as G,e as _,u as m,Q as H,aJ as P,f as U,_ as Q}from"./index-pDgVIYSh.js";function W(){const r=d({list:[],isLoading:!1});function i(){r.value.isLoading=!0,$({}).then(u=>{r.value.list=u.map(l=>(typeof l.img=="string"&&(l.img=l.img.split(",")),l))}).finally(()=>{r.value.isLoading=!1})}const c=d([{type:"index",label:"序号",width:100},{label:"手机号",prop:"phone_info.phoneNumber",width:150},{label:"昵称",prop:"name"},{label:"会员",prop:"name"},{label:"会员时间",prop:"name",width:300},{label:"状态",prop:"state",slot:"state"},{label:"星币",prop:"name"},{label:"链接数",prop:"likes",cellRenderer({row:u}){var l;return(l=u==null?void 0:u.likes)==null?void 0:l.length}},{label:"创建时间",prop:"date"},{label:"ip地址",prop:"name"},{label:"操作",prop:"name",slot:"operation"}]),v=[{value:1,label:"Asia",children:[{value:2,label:"China",children:[{value:3,label:"Beijing"},{value:4,label:"Shanghai"},{value:5,label:"Hangzhou"}]},{value:6,label:"Japan",children:[{value:7,label:"Tokyo"},{value:8,label:"Osaka"},{value:9,label:"Kyoto"}]},{value:10,label:"Korea",children:[{value:11,label:"Seoul"},{value:12,label:"Busan"},{value:13,label:"Taegu"}]}]},{value:14,label:"Europe",children:[{value:15,label:"France",children:[{value:16,label:"Paris"},{value:17,label:"Marseille"},{value:18,label:"Lyon"}]},{value:19,label:"UK",children:[{value:20,label:"London"},{value:21,label:"Birmingham"},{value:22,label:"Manchester"}]}]},{value:23,label:"North America",children:[{value:24,label:"US",children:[{value:25,label:"New York"},{value:26,label:"Los Angeles"},{value:27,label:"Washington"}]},{value:28,label:"Canada",children:[{value:29,label:"Toronto"},{value:30,label:"Montreal"},{value:31,label:"Ottawa"}]}]}];function o(u){}function f(u){K.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{O({id:u}).then(()=>{w.success("删除成功"),i()})}).catch(()=>{w.info("已取消删除")})}return{columns:c,loadData:i,options:v,tableData:r,handDelete:f,handleSelectionChange:o}}const Y=B({__name:"DialogForm",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(r){const i=j(r,"modelValue");function c(){i.value=!1}const v=z(),o=d({name:"",textarea:"",switch:!1,num:200,date:[v.startOf("day").format("yyyy-MM-dd"),v.add(1,"year").startOf("day").format("yyyy-MM-dd")]}),f=I({name:[{required:!0,message:"不可以为空"}]});return(u,l)=>{const g=t("el-input"),p=t("el-form-item"),h=t("el-switch"),b=t("el-date-picker"),y=t("el-input-number"),x=t("el-form"),V=t("el-dialog");return k(),M(V,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=e=>i.value=e),title:"新增手抄报",width:"500","before-close":c},{default:n(()=>[a(x,{ref:"ruleFormRef","label-position":"top",model:o.value,rules:f,"label-width":"auto",class:"demo-ruleForm","status-icon":""},{default:n(()=>[a(p,{label:"手机号",prop:"name"},{default:n(()=>[a(g,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.name=e),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(p,{label:"昵称",prop:"name"},{default:n(()=>[a(g,{modelValue:o.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.name=e),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(p,{label:"是否开会员",prop:"switch"},{default:n(()=>[a(h,{modelValue:o.value.switch,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.switch=e)},null,8,["modelValue"])]),_:1}),o.value.switch?(k(),M(p,{key:0,label:"会员时间",prop:"switch"},{default:n(()=>[a(b,{modelValue:o.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.date=e),type:"daterange","range-separator":"至","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})):J("",!0),a(p,{label:"星币",prop:"name"},{default:n(()=>[a(y,{modelValue:o.value.num,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.num=e),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),X={class:"flex"},Z={class:"head"},ee={class:"table_operation"},le=B({__name:"index",setup(r){const{columns:i,tableData:c,handDelete:v,loadData:o,options:f,handleSelectionChange:u}=W(),l=d([]),g=d(),p=d();q(()=>{o()});const h=d(""),b=d(!1),y=d({});function x(V){b.value=!0,y.value=V}return(V,e)=>{const D=t("el-input"),E=t("el-button"),L=t("el-tag"),N=t("Remove"),C=t("el-icon"),S=t("Edit"),T=t("pure-table"),F=t("el-cascader-panel"),R=t("el-popover");return k(),G(H,null,[_("div",X,[_("div",Z,[e[5]||(e[5]=_("div",null,"用户列表",-1)),_("div",null,[a(D,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),"suffix-icon":m(P),style:{width:"240px","margin-right":"20px"},placeholder:"请输入"},null,8,["modelValue","suffix-icon"]),a(E,{type:"primary",onClick:e[1]||(e[1]=s=>b.value=!0)},{default:n(()=>e[4]||(e[4]=[U("新增")])),_:1})])]),a(T,{"row-key":"id",data:m(c).list,loading:m(c).isLoading,columns:m(i),onSelectionChange:m(u)},{state:n(()=>[a(L,{type:"primary"},{default:n(()=>e[6]||(e[6]=[U("状态")])),_:1})]),operation:n(({row:s})=>[_("div",ee,[a(C,{onClick:A=>m(v)(s._id)},{default:n(()=>[a(N)]),_:2},1032,["onClick"]),a(C,{onClick:A=>x(s)},{default:n(()=>[a(S)]),_:2},1032,["onClick"])])]),_:1},8,["data","loading","columns","onSelectionChange"]),a(R,{ref_key:"popoverRef",ref:p,"virtual-ref":g.value,width:"400px",trigger:"click","virtual-triggering":"",placement:"bottom-start"},{default:n(()=>[_("div",null,[a(F,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),props:{multiple:!0},options:m(f)},null,8,["modelValue","options"])])]),_:1},8,["virtual-ref"])]),a(Y,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s)},null,8,["modelValue"])],64)}}}),te=Q(le,[["__scopeId","data-v-10940d56"]]);export{te as default};
