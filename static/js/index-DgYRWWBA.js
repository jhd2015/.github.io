var R=(e,a,s)=>new Promise((n,t)=>{var u=i=>{try{l(s.next(i))}catch(r){t(r)}},h=i=>{try{l(s.throw(i))}catch(r){t(r)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then(u,h);l((s=s.apply(e,a)).next())});import{aM as Y,az as L,d as z,aA as K,aB as N,q as O,n as E,r as g,j as J,o as B,c as j,b as p,h as C,w as _,g as I,Q as q,e as y,V as S,P as Z,al as $,_ as ee}from"./index-DVQFhUTl.js";const fe=e=>Y.request("post","/hand/add",{data:e}),we=e=>Y.request("get","/hand/list",{data:e}),ge=e=>Y.request("post","/hand/delete",{data:e}),ve=e=>Y.request("post","/hand/update",{data:e}),te=e=>Y.request("post","/upload",{data:e},{headers:{"Content-Type":"multipart/form-data"}}),Ce={upper(e){return Y.request("post","/hand/on",{data:e})},lower(e){return Y.request("post","/hand/off",{data:e})},free(e){return Y.request("post","/hand/free",{data:e})}};function Ye(e){if(!navigator.clipboard){ae(e);return}navigator.clipboard.writeText(e).then(function(){L.success("复制成功！")},function(){L.error("复制失败，请手动复制！")})}function ae(e){var a=document.createElement("textarea");a.value=e,a.style.top="0",a.style.left="0",a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select();try{var s=document.execCommand("copy");s&&L.success("复制成功！")}catch(n){L.error("复制失败，请手动复制！")}document.body.removeChild(a)}const oe="data:image/png;base64,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";function se(){function e(s,n){return R(this,null,function*(){const t=document.createElement("canvas"),u=50,h=-20*Math.PI/180,l=s.width,i=s.height,r=(n==null?void 0:n.width)||0,f=(n==null?void 0:n.height)||0;t.width=Math.max(l,r)+2*u,t.height=Math.max(l,r)+3*u;const c=t.getContext("2d");c.fillStyle="red",c.fillRect(0,0,t.width,t.height);const U=(t.width-l)/2,b=n?u+50:u;if(c.drawImage(s,U,b,l,i),c.save(),n){const k=(t.width-r)/2,o=u;c.translate(k+r/2,o+f/2),c.rotate(h),c.drawImage(n,-r/2,-f/2,r,f),c.restore()}const D=yield G(oe);return V(D,{ctx:c,canvasWidth:t.width,canvasHeight:t.height}),new Promise(k=>{t.toBlob(o=>{const d=new File([o],"merged-image.png",{type:"image/png",lastModified:Date.now()});t.remove(),k({raw:d,url:URL.createObjectURL(o)})})})})}function a(s){const n=new FileReader;return new Promise(t=>{n.onload=u=>R(this,null,function*(){const h=yield G(u.target.result);t(h)}),n.readAsDataURL(s)})}return{combineImages:e,getFileReader:a,ImageLoadimg:G,watermark:V}}function G(e){return new Promise(a=>{const s=new Image;s.onload=()=>{a(s)},s.src=e})}function V(e,{ctx:a,canvasWidth:s,canvasHeight:n}){const h=e.width,l=e.height,i=Math.ceil(s/(h+100)),r=Math.ceil(n/(l+100));for(let f=0;f<i;f++)for(let c=0;c<r;c++){const U=f*(h+100),b=c*(l+100);a.globalAlpha=.5,a.drawImage(e,U,b,h,l),a.globalAlpha=1}}const ne={class:"uploadBox"},le={class:"el-upload-list__item-thumbnail"},ce=["src"],ie={key:0,class:"el-upload-list__item-status-label"},re={class:"el-upload-list__item-actions"},de=["onClick"],ue=["onClick"],he=["onClick"],pe=z({__name:"index",props:K({name:{default:"1"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{getFileReader:a,combineImages:s}=se(),n="https://feima.mynatapp.cc/admin/upload",t=N(e,"modelValue"),u=O(()=>t.value.map(o=>o.url));E(!1),E("");const h=E(0),l=E(!1);E(!1);const i=E(),r=o=>{i.value.handleRemove(o)},f=o=>{h.value=o,l.value=!0},c=E(0),U=o=>{const d=t.value[o];t.value.forEach(M=>{M.check=!1}),c.value=o,d.check=!0};function b(o,d){D()}const D=$(k,500);function k(){return R(this,null,function*(){const o=[],d=[];t.value.forEach(w=>{w.response||w.status=="success"?o.push(w):d.push(w)});const[M,A]=d;M.status="uploading",A&&(A.status="uploading");const x=yield a(M.raw),H=A?yield a(A.raw):!1,v=yield s(x,H),P=new FormData;P.append("file",v.raw),yield te(P).then(w=>{v.response=w,v.status="success",o.push(v),t.value=o}).catch(w=>{v.status="fail",o.push(v),t.value=o})})}return(o,d)=>{const M=g("Plus"),A=g("el-icon"),x=g("icon-picture"),H=g("Check"),v=g("Select"),P=g("zoom-in"),w=g("Delete"),X=g("el-upload"),T=g("el-image-viewer"),Q=J("loading");return B(),j("div",ne,[p(X,{ref_key:"uploadRef",ref:i,"file-list":t.value,"onUpdate:fileList":d[0]||(d[0]=m=>t.value=m),"list-type":"picture-card",width:"100px",multiple:"",name:"file",action:n,"auto-upload":!1,accept:"image/*",onChange:b},{file:C(({file:m,index:W})=>[_((B(),j("div",{key:W},[m.status=="fail"?(B(),I(A,{key:0},{default:C(()=>[p(x)]),_:1})):(B(),j(q,{key:1},[y("div",le,[y("img",{width:"100%",height:"100%",src:m.url,alt:""},null,8,ce)]),m.check?(B(),j("div",ie,[p(A,{color:"#fff"},{default:C(()=>[p(H)]),_:1})])):S("",!0),y("span",re,[y("span",{class:"el-upload-list__item-actions-preview",style:Z({color:m.check?"var(--el-color-success)":"#fff"}),onClick:F=>U(W)},[p(A,null,{default:C(()=>[p(v)]),_:1})],12,de),y("span",{class:"el-upload-list__item-preview",onClick:F=>f(W)},[p(A,null,{default:C(()=>[p(P)]),_:1})],8,ue),y("span",{class:"el-upload-list__item-delete",onClick:F=>r(m)},[p(A,null,{default:C(()=>[p(w)]),_:1})],8,he)])],64))])),[[Q,m.status=="uploading"]])]),default:C(()=>[p(A,null,{default:C(()=>[p(M)]),_:1})]),_:1},8,["file-list"]),l.value?(B(),I(T,{key:0,modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=m=>l.value=m),"initial-index":h.value,"url-list":u.value,style:{"z-index":"99999999999"},"z-index:":"99999999999",teleported:!0,onClose:d[2]||(d[2]=m=>l.value=!1)},null,8,["modelValue","initial-index","url-list"])):S("",!0)])}}}),Ee=ee(pe,[["__scopeId","data-v-388e88bc"]]);export{G as I,Ee as R,ge as a,ve as b,Ye as c,fe as d,te as e,we as h,Ce as o,oe as s,V as w};
