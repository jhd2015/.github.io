var z=Object.defineProperty,H=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(o,l,e)=>l in o?z(o,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[l]=e,D=(o,l)=>{for(var e in l||(l={}))P.call(l,e)&&S(o,e,l[e]);if(R)for(var e of R(l))Y.call(l,e)&&S(o,e,l[e]);return o},T=(o,l)=>H(o,I(l));var U=(o,l,e)=>new Promise((m,f)=>{var d=s=>{try{n(e.next(s))}catch(b){f(b)}},a=s=>{try{n(e.throw(s))}catch(b){f(b)}},n=s=>s.done?m(s.value):Promise.resolve(s.value).then(d,a);n((e=e.apply(o,l)).next())});import{a as G}from"./teachingAids-C0cdEULG.js";import{n as p,aN as Q,aF as W,aG as L,d as E,aH as N,aI as q,az as w,J as X,t as Z,g as ee,h as r,r as u,Y as le,o as A,e as y,b as i,f as F,aO as ae,x as oe,c as ne,u as V,Q as te,aJ as ie,_ as se}from"./index-exbkcW60.js";function ue(){const o=p({list:[],isLoading:!1});function l(){o.value.isLoading=!0,Q({}).then(a=>{o.value.list=a.map(n=>(typeof n.img=="string"&&(n.img=n.img.split(",")),n))}).finally(()=>{o.value.isLoading=!1})}const e=p([{type:"index",label:"序号",width:100},{label:"手机号",prop:"phone_info.phoneNumber",width:150},{label:"状态",prop:"state",slot:"state"},{label:"星币",prop:"myCoin"},{label:"链接数",prop:"likes",cellRenderer({row:a}){var n,s;return((n=a==null?void 0:a.buysMaterial)==null?void 0:n.length)+((s=a==null?void 0:a.likesMaterial)==null?void 0:s.length)}},{label:"创建时间",prop:"date",cellRenderer({row:a}){var n;return(n=a==null?void 0:a.date)==null?void 0:n.slice(0,10)}},{label:"操作",prop:"name",slot:"operation"}]),m=[{value:1,label:"Asia",children:[{value:2,label:"China",children:[{value:3,label:"Beijing"},{value:4,label:"Shanghai"},{value:5,label:"Hangzhou"}]},{value:6,label:"Japan",children:[{value:7,label:"Tokyo"},{value:8,label:"Osaka"},{value:9,label:"Kyoto"}]},{value:10,label:"Korea",children:[{value:11,label:"Seoul"},{value:12,label:"Busan"},{value:13,label:"Taegu"}]}]},{value:14,label:"Europe",children:[{value:15,label:"France",children:[{value:16,label:"Paris"},{value:17,label:"Marseille"},{value:18,label:"Lyon"}]},{value:19,label:"UK",children:[{value:20,label:"London"},{value:21,label:"Birmingham"},{value:22,label:"Manchester"}]}]},{value:23,label:"North America",children:[{value:24,label:"US",children:[{value:25,label:"New York"},{value:26,label:"Los Angeles"},{value:27,label:"Washington"}]},{value:28,label:"Canada",children:[{value:29,label:"Toronto"},{value:30,label:"Montreal"},{value:31,label:"Ottawa"}]}]}];function f(a){}function d(a){W.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{G({id:a}).then(()=>{L.success("删除成功"),l()})}).catch(()=>{L.info("已取消删除")})}return{columns:e,loadData:l,options:m,tableData:o,handDelete:d,handleSelectionChange:f}}const de={class:"dialog-footer"},re=E({__name:"DialogForm",props:N({data:{default:{_id:"",name:""}}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:N(["refresh"],["update:modelValue"]),setup(o,{emit:l}){const e=q(o,"modelValue"),m=o;function f(){e.value=!1}w();const d=p({id:"",name:"",coin:0});X(()=>e.value,()=>{le(()=>{d.value=T(D({},m.data),{name:m.data.phone_info.phoneNumber,id:m.data._id,coin:0}),b.value.resetFields()})});const a=Z({}),n=l,s=p(!1),b=p();function x(){return U(this,null,function*(){s.value=!0;const _=D({},d.value),t=new FormData;for(const h in _)Object.prototype.hasOwnProperty.call(_,h)&&t.append(h,_[h]);ae(t).then(()=>{e.value=!1,n("refresh")}).finally(()=>{s.value=!1})})}return(_,t)=>{const h=u("el-input"),k=u("el-form-item"),c=u("el-input-number"),M=u("el-form"),C=u("el-button"),B=u("el-dialog");return A(),ee(B,{modelValue:e.value,"onUpdate:modelValue":t[3]||(t[3]=v=>e.value=v),title:"添加星币",width:"500","before-close":f},{footer:r(()=>[y("div",de,[i(C,{onClick:t[2]||(t[2]=v=>e.value=!1)},{default:r(()=>t[4]||(t[4]=[F("取消")])),_:1}),i(C,{type:"primary",loading:s.value,onClick:x},{default:r(()=>t[5]||(t[5]=[F(" 确认 ")])),_:1},8,["loading"])])]),default:r(()=>[i(M,{ref_key:"ruleFormRef",ref:b,"label-position":"top",model:d.value,rules:a,"label-width":"auto",class:"demo-ruleForm","status-icon":""},{default:r(()=>[i(k,{label:"昵称",prop:"name"},{default:r(()=>[i(h,{modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=v=>d.value.name=v),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),i(k,{label:"星币",prop:"coin"},{default:r(()=>[i(c,{modelValue:d.value.coin,"onUpdate:modelValue":t[1]||(t[1]=v=>d.value.coin=v),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),ce={class:"flex"},pe={class:"head"},me={class:"table_operation"},ve=E({__name:"index",setup(o){const{columns:l,tableData:e,handDelete:m,loadData:f,options:d,handleSelectionChange:a}=ue(),n=p([]),s=p(),b=p();oe(()=>{f()});const x=p(""),_=p(!1),t=p({});function h(k){_.value=!0,t.value=k}return(k,c)=>{const M=u("el-input"),C=u("el-tag"),B=u("Remove"),v=u("el-icon"),O=u("Edit"),$=u("pure-table"),j=u("el-cascader-panel"),J=u("el-popover");return A(),ne(te,null,[y("div",ce,[y("div",pe,[c[3]||(c[3]=y("div",null,"用户列表",-1)),y("div",null,[i(M,{modelValue:x.value,"onUpdate:modelValue":c[0]||(c[0]=g=>x.value=g),"suffix-icon":V(ie),style:{width:"240px","margin-right":"20px"},placeholder:"请输入"},null,8,["modelValue","suffix-icon"])])]),i($,{"row-key":"id",data:V(e).list,loading:V(e).isLoading,columns:V(l),onSelectionChange:V(a)},{state:r(()=>[i(C,{type:"primary"},{default:r(()=>c[4]||(c[4]=[F("状态")])),_:1})]),operation:r(({row:g})=>[y("div",me,[i(v,{onClick:K=>V(m)(g._id)},{default:r(()=>[i(B)]),_:2},1032,["onClick"]),i(v,{onClick:K=>h(g)},{default:r(()=>[i(O)]),_:2},1032,["onClick"])])]),_:1},8,["data","loading","columns","onSelectionChange"]),i(J,{ref_key:"popoverRef",ref:b,"virtual-ref":s.value,width:"400px",trigger:"click","virtual-triggering":"",placement:"bottom-start"},{default:r(()=>[y("div",null,[i(j,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=g=>n.value=g),props:{multiple:!0},options:V(d)},null,8,["modelValue","options"])])]),_:1},8,["virtual-ref"])]),i(re,{modelValue:_.value,"onUpdate:modelValue":c[2]||(c[2]=g=>_.value=g),data:t.value},null,8,["modelValue","data"])],64)}}}),ge=se(ve,[["__scopeId","data-v-b90bcef6"]]);export{ge as default};
