var P=Object.defineProperty;var E=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var F=(r,n,a)=>n in r?P(r,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[n]=a,L=(r,n)=>{for(var a in n||(n={}))z.call(n,a)&&F(r,a,n[a]);if(E)for(var a of E(n))H.call(n,a)&&F(r,a,n[a]);return r};import{a as I}from"./teachingAids-DsL0U0ly.js";import{n as c,aN as J,aF as q,aG as N,d as w,aH as R,aI as G,az as Q,t as W,g as T,h as u,r as s,o as S,e as h,b as l,f as C,V as Y,aO as X,aP as Z,x as ee,c as le,u as g,Q as ae,aJ as te,_ as oe}from"./index-BY7pdI-H.js";function ne(){const r=c({list:[],isLoading:!1});function n(){r.value.isLoading=!0,J({}).then(o=>{r.value.list=o.map(i=>(typeof i.img=="string"&&(i.img=i.img.split(",")),i))}).finally(()=>{r.value.isLoading=!1})}const a=c([{type:"index",label:"序号",width:100},{label:"手机号",prop:"phone_info.phoneNumber",width:150},{label:"状态",prop:"state",slot:"state"},{label:"星币",prop:"myCoin"},{label:"链接数",prop:"likes",cellRenderer({row:o}){var i,v;return((i=o==null?void 0:o.buysMaterial)==null?void 0:i.length)+((v=o==null?void 0:o.likesMaterial)==null?void 0:v.length)}},{label:"创建时间",prop:"date",cellRenderer({row:o}){var i;return(i=o==null?void 0:o.date)==null?void 0:i.slice(0,10)}},{label:"操作",prop:"name",slot:"operation"}]),V=[{value:1,label:"Asia",children:[{value:2,label:"China",children:[{value:3,label:"Beijing"},{value:4,label:"Shanghai"},{value:5,label:"Hangzhou"}]},{value:6,label:"Japan",children:[{value:7,label:"Tokyo"},{value:8,label:"Osaka"},{value:9,label:"Kyoto"}]},{value:10,label:"Korea",children:[{value:11,label:"Seoul"},{value:12,label:"Busan"},{value:13,label:"Taegu"}]}]},{value:14,label:"Europe",children:[{value:15,label:"France",children:[{value:16,label:"Paris"},{value:17,label:"Marseille"},{value:18,label:"Lyon"}]},{value:19,label:"UK",children:[{value:20,label:"London"},{value:21,label:"Birmingham"},{value:22,label:"Manchester"}]}]},{value:23,label:"North America",children:[{value:24,label:"US",children:[{value:25,label:"New York"},{value:26,label:"Los Angeles"},{value:27,label:"Washington"}]},{value:28,label:"Canada",children:[{value:29,label:"Toronto"},{value:30,label:"Montreal"},{value:31,label:"Ottawa"}]}]}];function y(o){}function t(o){q.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I({id:o}).then(()=>{N.success("删除成功"),n()})}).catch(()=>{N.info("已取消删除")})}return{columns:a,loadData:n,options:V,tableData:r,handDelete:t,handleSelectionChange:y}}const ue={class:"dialog-footer"},se=w({__name:"DialogForm",props:R({data:{default:{_id:"",name:""}}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:R(["refresh"],["update:modelValue"]),setup(r,{emit:n}){const a=G(r,"modelValue");function V(){a.value=!1}const y=Q(),t=c({_id:"",name:"",textarea:"",switch:!1,num:0,date:[y.startOf("day").format("yyyy-MM-dd"),y.add(1,"year").startOf("day").format("yyyy-MM-dd")]}),o=W({name:[{required:!0,message:"不可以为空"}]}),i=n,v=c(!1);function M(){var b;v.value=!0;const _=L({},t.value),e=new FormData;for(const m in _)Object.prototype.hasOwnProperty.call(_,m)&&e.append(m,_[m]);(b=t.value)!=null&&b._id?(e.append("id",t.value._id),X(e).then(()=>{a.value=!1,i("refresh")}).finally(()=>{v.value=!1})):Z(e).then(()=>{a.value=!1,i("refresh")}).finally(()=>{v.value=!1})}return(_,e)=>{const b=s("el-input"),m=s("el-form-item"),k=s("el-switch"),d=s("el-date-picker"),U=s("el-input-number"),B=s("el-form"),x=s("el-button"),D=s("el-dialog");return S(),T(D,{modelValue:a.value,"onUpdate:modelValue":e[6]||(e[6]=p=>a.value=p),title:"新增手抄报",width:"500","before-close":V},{footer:u(()=>[h("div",ue,[l(x,{onClick:e[5]||(e[5]=p=>a.value=!1)},{default:u(()=>e[7]||(e[7]=[C("取消")])),_:1}),l(x,{type:"primary",loading:v.value,onClick:M},{default:u(()=>e[8]||(e[8]=[C(" 确认 ")])),_:1},8,["loading"])])]),default:u(()=>[l(B,{ref:"ruleFormRef","label-position":"top",model:t.value,rules:o,"label-width":"auto",class:"demo-ruleForm","status-icon":""},{default:u(()=>[l(m,{label:"手机号",prop:"name"},{default:u(()=>[l(b,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=p=>t.value.name=p),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(m,{label:"昵称",prop:"name"},{default:u(()=>[l(b,{modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=p=>t.value.name=p),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(m,{label:"是否开会员",prop:"switch"},{default:u(()=>[l(k,{modelValue:t.value.switch,"onUpdate:modelValue":e[2]||(e[2]=p=>t.value.switch=p)},null,8,["modelValue"])]),_:1}),t.value.switch?(S(),T(m,{key:0,label:"会员时间",prop:"switch"},{default:u(()=>[l(d,{modelValue:t.value.date,"onUpdate:modelValue":e[3]||(e[3]=p=>t.value.date=p),type:"daterange","range-separator":"至","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])]),_:1})):Y("",!0),l(m,{label:"星币",prop:"num"},{default:u(()=>[l(U,{modelValue:t.value.num,"onUpdate:modelValue":e[4]||(e[4]=p=>t.value.num=p),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),ie={class:"flex"},de={class:"head"},re={class:"table_operation"},pe=w({__name:"index",setup(r){const{columns:n,tableData:a,handDelete:V,loadData:y,options:t,handleSelectionChange:o}=ne(),i=c([]),v=c(),M=c();ee(()=>{y()});const _=c(""),e=c(!1),b=c({});function m(k){e.value=!0,b.value=k}return(k,d)=>{const U=s("el-input"),B=s("el-button"),x=s("el-tag"),D=s("Remove"),p=s("el-icon"),A=s("Edit"),O=s("pure-table"),$=s("el-cascader-panel"),j=s("el-popover");return S(),le(ae,null,[h("div",ie,[h("div",de,[d[5]||(d[5]=h("div",null,"用户列表",-1)),h("div",null,[l(U,{modelValue:_.value,"onUpdate:modelValue":d[0]||(d[0]=f=>_.value=f),"suffix-icon":g(te),style:{width:"240px","margin-right":"20px"},placeholder:"请输入"},null,8,["modelValue","suffix-icon"]),l(B,{type:"primary",onClick:d[1]||(d[1]=f=>e.value=!0)},{default:u(()=>d[4]||(d[4]=[C("新增")])),_:1})])]),l(O,{"row-key":"id",data:g(a).list,loading:g(a).isLoading,columns:g(n),onSelectionChange:g(o)},{state:u(()=>[l(x,{type:"primary"},{default:u(()=>d[6]||(d[6]=[C("状态")])),_:1})]),operation:u(({row:f})=>[h("div",re,[l(p,{onClick:K=>g(V)(f._id)},{default:u(()=>[l(D)]),_:2},1032,["onClick"]),l(p,{onClick:K=>m(f)},{default:u(()=>[l(A)]),_:2},1032,["onClick"])])]),_:1},8,["data","loading","columns","onSelectionChange"]),l(j,{ref_key:"popoverRef",ref:M,"virtual-ref":v.value,width:"400px",trigger:"click","virtual-triggering":"",placement:"bottom-start"},{default:u(()=>[h("div",null,[l($,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=f=>i.value=f),props:{multiple:!0},options:g(t)},null,8,["modelValue","options"])])]),_:1},8,["virtual-ref"])]),l(se,{modelValue:e.value,"onUpdate:modelValue":d[3]||(d[3]=f=>e.value=f),data:{}},null,8,["modelValue"])],64)}}}),fe=oe(pe,[["__scopeId","data-v-cf974bfa"]]);export{fe as default};
