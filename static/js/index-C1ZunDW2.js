var U=(e,o,t)=>new Promise((a,n)=>{var A=d=>{try{c(t.next(d))}catch(f){n(f)}},i=d=>{try{c(t.throw(d))}catch(f){n(f)}},c=d=>d.done?a(d.value):Promise.resolve(d.value).then(A,i);c((t=t.apply(e,o)).next())});import{aM as b,aG as H,d as K,aH as N,aI as O,q as z,n as k,r as w,j as J,o as j,c as L,b as g,h as E,w as _,g as x,Q as q,e as B,V as G,P as Z,al as $,_ as ee}from"./index-iKu4C4P4.js";const Ce=e=>b.request("post","/hand/add",{data:e}),Ye=e=>b.request("get","/hand/list",{params:e}),Ee=e=>b.request("post","/hand/delete",{data:e}),be=e=>b.request("post","/hand/update",{data:e}),te=e=>b.request("post","/upload",{data:e},{headers:{"Content-Type":"multipart/form-data"}}),Me={upper(e){return b.request("post","/hand/on",{data:e})},lower(e){return b.request("post","/hand/off",{data:e})},free(e){return b.request("post","/hand/free",{data:e})}};function ke(e){if(!navigator.clipboard){ae(e);return}navigator.clipboard.writeText(e).then(function(){H.success("复制成功！")},function(){H.error("复制失败，请手动复制！")})}function ae(e){var o=document.createElement("textarea");o.value=e,o.style.top="0",o.style.left="0",o.style.position="fixed",document.body.appendChild(o),o.focus(),o.select();try{var t=document.execCommand("copy");t&&H.success("复制成功！")}catch(a){H.error("复制失败，请手动复制！")}document.body.removeChild(o)}const oe="data:image/png;base64,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",ne="https://jhd2015.github.io/feima/static/png/background-Dwbfwd2b.png",se="https://jhd2015.github.io/feima/static/png/background2-D6IOcpHt.png",le="https://jhd2015.github.io/feima/static/png/hand-E1bMYT_7.png",ie="https://jhd2015.github.io/feima/static/png/hand2-Col334wJ.png";function ce(){function e(t){return U(this,null,function*(){const a=document.createElement("canvas");let n,A=-11.7*Math.PI/180,i,c=0,d=0;t.width>t.height?(n=yield y(se),i=yield y(ie),A=-9.7*Math.PI/180):(n=yield y(ne),i=yield y(le),c=a.height-i.height);const f=n.width,v=n.height;a.width=f,a.height=v,c=a.height-i.height;const l=a.getContext("2d");if(l.drawImage(n,0,0,f,v),t.width>t.height){l.save();const r=983.05,u=695,M=(a.width-r)/2,s=(a.height-u)/2;l.translate(M+r/2,s+u/2),l.rotate(A),l.drawImage(t,-r/2+12,-u/2+200,r,u),l.restore()}else{l.save();const r=795,u=1123.14,M=(a.width-r)/2,s=(a.height-u)/2;l.translate(M+r/2,s+u/2),l.rotate(A),l.drawImage(t,-r/2-3,-u/2+55,r,u),l.restore()}l.drawImage(i,d,c,i.width,i.height);const P=yield y(oe);return V(P,{ctx:l,canvasWidth:a.width,canvasHeight:a.height}),new Promise(r=>{a.toBlob(u=>{const M=new File([u],"merged-image.png",{type:"image/png",lastModified:Date.now()});a.remove(),r({raw:M,url:URL.createObjectURL(u)})},"image/png",.5)})})}function o(t){const a=new FileReader;return new Promise(n=>{a.onload=A=>U(this,null,function*(){const i=yield y(A.target.result);n(i)}),a.readAsDataURL(t)})}return{combineImages:e,getFileReader:o,ImageLoadimg:y,watermark:V}}function y(e){return new Promise(o=>{const t=new Image;t.onload=()=>{o(t)},t.src=e})}function V(e,{ctx:o,canvasWidth:t,canvasHeight:a}){const i=e.width,c=e.height,d=Math.ceil(t/(i+100)),f=Math.ceil(a/(c+100));for(let v=0;v<d;v++)for(let l=0;l<f;l++){const P=v*(i+100),r=l*(c+100);o.globalAlpha=.5,o.drawImage(e,P,r,i,c),o.globalAlpha=1}}const re={class:"uploadBox"},de={class:"el-upload-list__item-thumbnail"},ue=["src"],he={key:0,class:"el-upload-list__item-status-label"},pe={class:"el-upload-list__item-actions"},ge=["onClick"],me=["onClick"],Ae=["onClick"],fe=K({__name:"index",props:N({name:{default:"1"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{getFileReader:o,combineImages:t}=ce(),a="https://feima.mynatapp.cc/admin/upload",n=O(e,"modelValue"),A=z(()=>n.value.map(s=>s.url));k(!1),k("");const i=k(0),c=k(!1);k(!1);const d=k(),f=s=>{d.value.handleRemove(s)},v=s=>{i.value=s,c.value=!0},l=k(0),P=s=>{const p=n.value[s];n.value.forEach(h=>{h.check=!1}),l.value=s,p.check=!0};function r(s,p){u()}const u=$(M,500);function M(){return U(this,null,function*(){const s=[],p=[];n.value.forEach(h=>{h.response||h.status=="success"?s.push(h):p.push(h)}),p.forEach(h=>{h.status="uploading",o(h.raw).then(C=>U(this,null,function*(){try{const Y=yield t(C),D=new FormData;D.append("file",Y.raw);const R=yield te(D);R.file=`http://feima.mynatapp.cc/${R.file}`,Y.response=R,Y.url=R.file,Y.status="success",s.push(Y),n.value=s}catch(Y){h.status="fail",s.push(h),n.value=s}}))})})}return(s,p)=>{const h=w("Plus"),C=w("el-icon"),Y=w("icon-picture"),D=w("Check"),R=w("Select"),F=w("zoom-in"),S=w("Delete"),X=w("el-upload"),T=w("el-image-viewer"),Q=J("loading");return j(),L("div",re,[g(X,{ref_key:"uploadRef",ref:d,"file-list":n.value,"onUpdate:fileList":p[0]||(p[0]=m=>n.value=m),"list-type":"picture-card",width:"100px",multiple:"",name:"file",action:a,"auto-upload":!1,accept:"image/*",onChange:r},{file:E(({file:m,index:I})=>[_((j(),L("div",{key:I},[m.status=="fail"?(j(),x(C,{key:0},{default:E(()=>[g(Y)]),_:1})):(j(),L(q,{key:1},[B("div",de,[B("img",{width:"100%",height:"100%",src:m.url,alt:""},null,8,ue)]),m.check?(j(),L("div",he,[g(C,{color:"#fff"},{default:E(()=>[g(D)]),_:1})])):G("",!0),B("span",pe,[B("span",{class:"el-upload-list__item-actions-preview",style:Z({color:m.check?"var(--el-color-success)":"#fff"}),onClick:W=>P(I)},[g(C,null,{default:E(()=>[g(R)]),_:1})],12,ge),B("span",{class:"el-upload-list__item-preview",onClick:W=>v(I)},[g(C,null,{default:E(()=>[g(F)]),_:1})],8,me),B("span",{class:"el-upload-list__item-delete",onClick:W=>f(m)},[g(C,null,{default:E(()=>[g(S)]),_:1})],8,Ae)])],64))])),[[Q,m.status=="uploading"]])]),default:E(()=>[g(C,null,{default:E(()=>[g(h)]),_:1})]),_:1},8,["file-list"]),c.value?(j(),x(T,{key:0,modelValue:c.value,"onUpdate:modelValue":p[1]||(p[1]=m=>c.value=m),"initial-index":i.value,"url-list":A.value,style:{"z-index":"99999999999"},"z-index:":"99999999999",teleported:!0,onClose:p[2]||(p[2]=m=>c.value=!1)},null,8,["modelValue","initial-index","url-list"])):G("",!0)])}}}),ye=ee(fe,[["__scopeId","data-v-efa7c89d"]]);export{y as I,ye as R,Ee as a,be as b,ke as c,Ce as d,te as e,Ye as h,Me as o,oe as s,V as w};
