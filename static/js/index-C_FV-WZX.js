var x=(e,n,t)=>new Promise((a,c)=>{var o=s=>{try{i(t.next(s))}catch(w){c(w)}},d=s=>{try{i(t.throw(s))}catch(w){c(w)}},i=s=>s.done?a(s.value):Promise.resolve(s.value).then(o,d);i((t=t.apply(e,n)).next())});import{aM as C,aG as D,d as N,aH as K,aI as O,q as J,n as E,r as Y,j as q,o as U,c as P,b as v,h as M,w as Z,g as k,Q as _,e as b,V as I,al as $,_ as ee}from"./index-BZQRfro7.js";const ve=e=>C.request("post","/hand/add",{data:e}),Ce=e=>C.request("get","/hand/list",{params:e}),Ye=e=>C.request("post","/hand/delete",{data:e}),Ee=e=>C.request("post","/hand/update",{data:e}),Me=()=>C.request("get","/hand/categories"),te=e=>C.request("post","/upload",{data:e},{headers:{"Content-Type":"multipart/form-data"}}),Be={upper(e){return C.request("post","/hand/on",{data:e})},lower(e){return C.request("post","/hand/off",{data:e})},free(e){return C.request("post","/hand/free",{data:e})}};function Re(e){if(!navigator.clipboard){ae(e);return}navigator.clipboard.writeText(e).then(function(){D.success("复制成功！")},function(){D.error("复制失败，请手动复制！")})}function ae(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var t=document.execCommand("copy");t&&D.success("复制成功！")}catch(a){D.error("复制失败，请手动复制！")}document.body.removeChild(n)}const ne="data:image/png;base64,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",H="https://jhd2015.github.io/feima/static/png/background-fSkZ1u0m.png",oe="https://jhd2015.github.io/feima/static/png/hand-E1bMYT_7.png",se="https://jhd2015.github.io/feima/static/png/hand2-Col334wJ.png",j=1;function ie(){function e(c){return x(this,arguments,function*(t,a=j){const o=document.createElement("canvas");let d,i=-11.7*Math.PI/180,s,w=0,m=0,A=t.width>t.height;t.width>t.height?(d=yield B(H),s=yield B(se),i=-9.7*Math.PI/180):(d=yield B(H),s=yield B(oe));const R=d.width/a,y=d.height/a;o.width=R,o.height=y,w=o.height-s.height/a,A&&(w-=80);const h=o.getContext("2d");if(h.drawImage(d,0,0,R,y),A){h.save();const l=983.05/a,u=695/a,p=(o.width-l)/2,g=(o.height-u)/2-80;h.translate(p+l/2,g+u/2),h.rotate(i),h.drawImage(t,-l/2+12/a,-u/2+200-40/a,l,u),h.restore()}else{h.save();const l=795/a,u=1123.14/a,p=(o.width-l)/2,g=(o.height-u)/2;h.translate(p+l/2,g+u/2),h.rotate(i),h.drawImage(t,-l/2-3/a,-u/2+55/a,l,u),h.restore()}h.drawImage(s,m,w,s.width/a,s.height/a);const r=yield B(ne);return W(r,{ctx:h,canvasWidth:o.width,canvasHeight:o.height}),new Promise(l=>{o.toBlob(u=>x(this,null,function*(){let g=new File([u],Date.now()+".png",{type:"image/png",lastModified:Date.now()});g.size>524288&&(g=yield le(g,524288)),o.remove(),l({raw:g,url:URL.createObjectURL(u)})}))})})}function n(t){const a=new FileReader;return new Promise(c=>{a.onload=o=>x(this,null,function*(){const d=yield B(o.target.result);c(d)}),a.readAsDataURL(t)})}return{combineImages:e,getFileReader:n,ImageLoadimg:B,watermark:W}}function B(e){return new Promise(n=>{const t=new Image;t.onload=()=>{n(t)},t.src=e})}function W(e,{ctx:n,canvasWidth:t,canvasHeight:a}){const c=100/j,o=100/j,d=e.width/j,i=e.height/j,s=Math.ceil(t/(d+c)),w=Math.ceil(a/(i+o));for(let m=0;m<s;m++)for(let A=0;A<w;A++){const R=m*(d+c),y=A*(i+o);n.drawImage(e,R,y,d,i)}}function le(e,n){return new Promise(t=>{ce(e).then(a=>{F(a,e,n,t)})})}function F(e,n,t,a,c=10){const o=document.createElement("canvas"),d=e.width/e.height;let i=e.width-c,s=i/d;e.width=i,e.height=s,o.width=i,o.height=s,o.getContext("2d").drawImage(e,0,0,i,s),o.toBlob(m=>{if(m.size>t)F(e,n,t,a,c+10);else{let A=new File([m],n.name+".png",{type:n.type,lastModified:Date.now()});a(A)}},n.type,1)}function ce(e){return new Promise(n=>{const t=new FileReader;t.onerror=a=>{console.error("Error reading file:",a)},t.onload=a=>{const c=new Image;c.onload=()=>{n(c)},c.src=a.target.result},t.readAsDataURL(e)})}const re={class:"uploadBox"},de={class:"el-upload-list__item-thumbnail"},ue=["src"],he={key:0,class:"el-upload-list__item-status-label"},ge={class:"el-upload-list__item-actions"},pe=["onClick"],we=["onClick"],me=N({__name:"index",props:K({name:{default:"1"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{getFileReader:n,combineImages:t}=ie(),a="https://www.feima.fun/admin/upload",c=O(e,"modelValue"),o=J(()=>c.value.map(r=>r.url));E(!1),E("");const d=E(0),i=E(!1);E(!1);const s=E(),w=r=>{s.value.handleRemove(r)},m=r=>{d.value=r,i.value=!0};E(0);function A(r,l){R()}const R=$(y,500);function y(){return x(this,null,function*(){c.value.forEach(r=>{["success","uploading"].includes(r.status)||h(r)})})}function h(r){return x(this,null,function*(){r.status="uploading";let l;try{l=yield n(r.raw);const u=yield t(l),p=new FormData;p.append("file",u.raw);const g=yield te(p);g.file=`https://www.feima.fun/${g.file}`,r.response=g,r.url=g.file,r.status="success"}catch(u){r.status="fail"}})}return(r,l)=>{const u=Y("Plus"),p=Y("el-icon"),g=Y("icon-picture"),G=Y("Check"),V=Y("zoom-in"),T=Y("Delete"),S=Y("el-upload"),X=Y("el-image-viewer"),Q=q("loading");return U(),P("div",re,[v(S,{ref_key:"uploadRef",ref:s,"file-list":c.value,"onUpdate:fileList":l[0]||(l[0]=f=>c.value=f),"list-type":"picture-card",width:"100px",multiple:"",name:"file",action:a,"auto-upload":!1,accept:"image/*",onChange:A},{file:M(({file:f,index:L})=>[Z((U(),P("div",{key:L},[f.status=="fail"?(U(),k(p,{key:0},{default:M(()=>[v(g)]),_:1})):(U(),P(_,{key:1},[b("div",de,[b("img",{width:"100%",height:"100%",src:f.url,alt:""},null,8,ue)]),f.check?(U(),P("div",he,[v(p,{color:"#fff"},{default:M(()=>[v(G)]),_:1})])):I("",!0),b("span",ge,[b("span",{class:"el-upload-list__item-preview",onClick:z=>m(L)},[v(p,null,{default:M(()=>[v(V)]),_:1})],8,pe),b("span",{class:"el-upload-list__item-delete",onClick:z=>w(f)},[v(p,null,{default:M(()=>[v(T)]),_:1})],8,we)])],64))])),[[Q,f.status=="uploading"]])]),default:M(()=>[v(p,null,{default:M(()=>[v(u)]),_:1})]),_:1},8,["file-list"]),i.value?(U(),k(X,{key:0,modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=f=>i.value=f),"initial-index":d.value,"url-list":o.value,style:{"z-index":"99999999999"},"z-index:":"99999999999",teleported:!0,onClose:l[2]||(l[2]=f=>i.value=!1)},null,8,["modelValue","initial-index","url-list"])):I("",!0)])}}}),ye=ee(me,[["__scopeId","data-v-36963ad2"]]);export{B as I,ye as R,Ye as a,Ee as b,Re as c,ve as d,te as e,Me as g,Ce as h,Be as o,ne as s,W as w};
