var y=(e,t,o)=>new Promise((a,n)=>{var p=r=>{try{c(o.next(r))}catch(i){n(i)}},u=r=>{try{c(o.throw(r))}catch(i){n(i)}},c=r=>r.done?a(r.value):Promise.resolve(r.value).then(p,u);c((o=o.apply(e,t)).next())});import{aN as C,az as P,d as N,aA as z,aB as K,q as O,n as E,r as f,j as J,o as b,c as j,b as h,h as v,w as _,g as G,Q as q,e as M,V,P as Z,al as $,_ as ee}from"./index-CCAUkCJQ.js";const we=e=>C.request("post","/hand/add",{data:e}),ve=e=>C.request("get","/hand/list",{data:e}),Ce=e=>C.request("post","/hand/delete",{data:e}),Ye=e=>C.request("post","/hand/update",{data:e}),te=e=>C.request("post","/upload",{data:e},{headers:{"Content-Type":"multipart/form-data"}}),Ee={upper(e){return C.request("post","/hand/on",{data:e})},lower(e){return C.request("post","/hand/off",{data:e})},free(e){return C.request("post","/hand/free",{data:e})}};function be(e){if(!navigator.clipboard){ae(e);return}navigator.clipboard.writeText(e).then(function(){P.success("复制成功！")},function(){P.error("复制失败，请手动复制！")})}function ae(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var o=document.execCommand("copy");o&&P.success("复制成功！")}catch(a){P.error("复制失败，请手动复制！")}document.body.removeChild(t)}const oe="data:image/png;base64,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",ne="https://jhd2015.github.io/feima/static/png/background-Dwbfwd2b.png",se="https://jhd2015.github.io/feima/static/png/hand-E1bMYT_7.png";function le(){function e(o){return y(this,null,function*(){const a=document.createElement("canvas"),n=yield R(ne),p=yield R(se),u=-11.7*Math.PI/180,c=n.width,r=n.height;a.width=c,a.height=r;const i=a.getContext("2d");i.drawImage(n,0,0,c,r),i.save();const A=795,g=1123.14,k=(a.width-A)/2,B=(a.height-g)/2;i.translate(k+A/2,B+g/2),i.rotate(u),i.drawImage(o,-A/2-3,-g/2+55,A,g),i.restore();const L=a.height-p.height;i.drawImage(p,0,L,p.width,p.height);const D=yield R(oe);return I(D,{ctx:i,canvasWidth:a.width,canvasHeight:a.height}),new Promise(s=>{a.toBlob(d=>{const l=new File([d],"merged-image.png",{type:"image/png",lastModified:Date.now()});a.remove(),s({raw:l,url:URL.createObjectURL(d)})},"image/png",.5)})})}function t(o){const a=new FileReader;return new Promise(n=>{a.onload=p=>y(this,null,function*(){const u=yield R(p.target.result);n(u)}),a.readAsDataURL(o)})}return{combineImages:e,getFileReader:t,ImageLoadimg:R,watermark:I}}function R(e){return new Promise(t=>{const o=new Image;o.onload=()=>{t(o)},o.src=e})}function I(e,{ctx:t,canvasWidth:o,canvasHeight:a}){const u=e.width,c=e.height,r=Math.ceil(o/(u+100)),i=Math.ceil(a/(c+100));for(let A=0;A<r;A++)for(let g=0;g<i;g++){const k=A*(u+100),B=g*(c+100);t.globalAlpha=.5,t.drawImage(e,k,B,u,c),t.globalAlpha=1}}const ce={class:"uploadBox"},ie={class:"el-upload-list__item-thumbnail"},re=["src"],de={key:0,class:"el-upload-list__item-status-label"},ue={class:"el-upload-list__item-actions"},he=["onClick"],pe=["onClick"],me=["onClick"],Ae=N({__name:"index",props:z({name:{default:"1"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{getFileReader:t,combineImages:o}=le(),a="https://feima.mynatapp.cc/admin/upload",n=K(e,"modelValue"),p=O(()=>n.value.map(s=>s.url));E(!1),E("");const u=E(0),c=E(!1);E(!1);const r=E(),i=s=>{r.value.handleRemove(s)},A=s=>{u.value=s,c.value=!0},g=E(0),k=s=>{const d=n.value[s];n.value.forEach(l=>{l.check=!1}),g.value=s,d.check=!0};function B(s,d){L()}const L=$(D,500);function D(){return y(this,null,function*(){const s=[],d=[];n.value.forEach(l=>{l.response||l.status=="success"?s.push(l):d.push(l)}),d.forEach(l=>{l.status="uploading",t(l.raw).then(w=>y(this,null,function*(){try{const Y=yield o(w),U=new FormData;U.append("file",Y.raw);const x=yield te(U);Y.response=x,l.url=Y.url,l.status="success",s.push(Y),n.value=s}catch(Y){l.status="fail",s.push(l),n.value=s}}))})})}return(s,d)=>{const l=f("Plus"),w=f("el-icon"),Y=f("icon-picture"),U=f("Check"),x=f("Select"),F=f("zoom-in"),S=f("Delete"),T=f("el-upload"),X=f("el-image-viewer"),Q=J("loading");return b(),j("div",ce,[h(T,{ref_key:"uploadRef",ref:r,"file-list":n.value,"onUpdate:fileList":d[0]||(d[0]=m=>n.value=m),"list-type":"picture-card",width:"100px",multiple:"",name:"file",action:a,"auto-upload":!1,accept:"image/*",onChange:B},{file:v(({file:m,index:H})=>[_((b(),j("div",{key:H},[m.status=="fail"?(b(),G(w,{key:0},{default:v(()=>[h(Y)]),_:1})):(b(),j(q,{key:1},[M("div",ie,[M("img",{width:"100%",height:"100%",src:m.url,alt:""},null,8,re)]),m.check?(b(),j("div",de,[h(w,{color:"#fff"},{default:v(()=>[h(U)]),_:1})])):V("",!0),M("span",ue,[M("span",{class:"el-upload-list__item-actions-preview",style:Z({color:m.check?"var(--el-color-success)":"#fff"}),onClick:W=>k(H)},[h(w,null,{default:v(()=>[h(x)]),_:1})],12,he),M("span",{class:"el-upload-list__item-preview",onClick:W=>A(H)},[h(w,null,{default:v(()=>[h(F)]),_:1})],8,pe),M("span",{class:"el-upload-list__item-delete",onClick:W=>i(m)},[h(w,null,{default:v(()=>[h(S)]),_:1})],8,me)])],64))])),[[Q,m.status=="uploading"]])]),default:v(()=>[h(w,null,{default:v(()=>[h(l)]),_:1})]),_:1},8,["file-list"]),c.value?(b(),G(X,{key:0,modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=m=>c.value=m),"initial-index":u.value,"url-list":p.value,style:{"z-index":"99999999999"},"z-index:":"99999999999",teleported:!0,onClose:d[2]||(d[2]=m=>c.value=!1)},null,8,["modelValue","initial-index","url-list"])):V("",!0)])}}}),Me=ee(Ae,[["__scopeId","data-v-36556c81"]]);export{R as I,Me as R,Ce as a,Ye as b,be as c,we as d,te as e,ve as h,Ee as o,oe as s,I as w};
